---                
layout: post            
title: "OWIN"                
date:   2022-2-10 17:30:00                 
categories: ".Net Core"                
catalog: true                
tags:                 
    - .Net Core                
---      
OWIN是Open Web Server Interface for .NET的首字母缩写.  
OWIN在.NET Web Servers与Web Application之间定义了一套标准接口，OWIN的目标是用于解耦Web Server和Web Application。基于此标准，鼓励开发者开发简单、灵活的模块，从而推进.NET Web Development开源生态系统的发展。  

为什么需要这样一个接口呢？因为.NET Web应用程序是运行于Web服务器之中的，.NET Web应用程序需要通过Web服务器接收用户的请求，并且通过Web服务器将响应内容发送用户。如果没有这样一个接口，.NET Web应用程序就要依赖于所运行的具体Web服务器，比如ASP.NET应用程序要依赖于IIS。有了这个接口，ASP.NET应用程序只需依赖这个抽象接口，不用关心所运行的Web服务器。  
所以，OWIN的作用就是通过引入一组抽象接口，解耦了.NET Web应用程序与Web服务器，再次体现了接口的重要性。  

# Demo
1. 创建一个空的控制台项目  
   ![img](https://github.com/kerwenzhang/kerwenzhang.github.io/blob/master/_posts/image/owin.png?raw=true)  
2. 通过Nuget来安装 Microsoft.AspNet.WebApi.OwinSelfHost  
3. 添加一个OWIN启动类名为Startup  

    using Owin;
    using System.Web.Http;

    namespace Owin_demo
    {
        public class Startup
        {
            public void Configuration(IAppBuilder appBuilder)
            {
                HttpConfiguration config = new HttpConfiguration();
                config.Routes.MapHttpRoute(
                    name: "DefaultApi",
                    routeTemplate: "api/{controller}/{id}",
                    defaults: new { id = RouteParameter.Optional }
                );

                appBuilder.UseWebApi(config);
            }
        }
    }

4. 编写一个WebAPI的控制器  

        using System.Collections.Generic;
        using System.Web.Http;

        namespace Owin_demo
        {
            public class BlogController : ApiController
            {
                public IEnumerable<string> Get()
                {
                    return new string[] { "kerwen", "owin kerwen blog" };
                }

                public string Get(int id)
                {
                    return string.Format("owin {0} by:kerwen", id);
                }
            }
        }

5. 在Program.cs中启动OWIN  
   
        static void Main(string[] args)
        {
            string baseAddress = "http://localhost:9000/";
            WebApp.Start<Startup>(url: baseAddress);
            Console.WriteLine("Program has started, press any key to exit");
            Console.ReadLine();
        }

6. 启动控制台程序，然后访问我们刚才设置的地址：  
    
    http://localhost:9000/api/blog 
    http://localhost:9000/api/blog/88

# Reference

[owin](http://owin.org/)  
[Open Web Interface for .NET (OWIN) with ASP.NET Core](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/owin?view=aspnetcore-6.0)  
[OWIN and Katana](https://docs.microsoft.com/en-us/aspnet/aspnet/overview/owin-and-katana/)  
[OWIN使用](https://www.cnblogs.com/yuesebote/p/10888703.html)